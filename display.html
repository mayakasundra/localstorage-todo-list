<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Display data in Table</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-12">
          <table class="table table-striped" id="employeeList">
            <thead>
              <tr>
                <th scope="col">Date</th>
                <th scope="col">Title</th>
                <th scope="col">Message</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>
    <script src="js/cookie.js"></script>
    <script>
      let loginuser = JSON.parse(getCookie("userdata"));

      // function display(ar) {
      //   let str = "";

      //   ar.forEach(function (task) {
      //     str += `<tr>
      //                       <td>${task.Date}</td>
      //                       <td>${task.Title}</td>
      //                       <td>${task.Message}</td>
      //                       <td><button onclick='updateValue(this)'>Update</button>
      //                       <button onclick="deleteValue(${task.id})">Delete</button></td>
      //                   </tr>`;
      //   });
      //   document.getElementById("tbody").innerHTML = str;
      // }

      // let a = JSON.parse(localStorage.getItem("dashboard-data"));

      // let tasklist = a.filter(function (value) {
      //   return value.UserId == loginuser.id;
      // });
      // display(tasklist);

      //edit function 
      // function updateValue(td){
        
      //   let selectedRow = td.parentElement.parentElement;
      //   document.getElementById('fullName').value = selectedRow.cells[0].innerHTML;
      //   document.getElementById('empCode').value = selectedRow.cells[1].innerHTML;
      //   document.getElementById('salary').value = selectedRow.cells[2].innerHTML;
        // document.getElementById('city').value = selectedRow.cells[3].innerHTML;
    
  // }

      function deleteValue(td) {
        let text = "are you sure...! you want to delete??";
        if (confirm(text) == true) {
          let arr = JSON.parse(localStorage.getItem("dashboard-data"))
          
          const indexOfObject = arr.findIndex((object) => {
            return object.id === td;
     
        //  console.log(xyz);
          });
          let abc=arr.splice(indexOfObject, 1);
         
          console.log(indexOfObject); 

         
         localStorage.setItem("dashboard-data",JSON.stringify(arr));
         display(abc);

         
        } else {
          text = "You canceled!";
        }
      }
    </script>
  </body>
</html>
